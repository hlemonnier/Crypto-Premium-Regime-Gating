project:
  name: Crypto Premium Regime Gating
  version: v5
data:
  resample_rule: 1min
  ffill_limit: 2
  sanitize_single_bar_spikes: true
  single_bar_spike_jump_log: 0.015
  single_bar_spike_reversion_log: 0.003
  single_bar_spike_counterpart_max_log: 0.002
  single_bar_spike_min_cross_pairs: 1
  price_matrix_path: data/processed/episodes/yen_unwind_2024_binance/prices_matrix.csv
data_sources:
  binance: https://data.binance.vision/?prefix=data/
  gateio: https://www.gate.com/developer/historical_quotes
  bybit: https://www.bybit.com/derivatives/en/history-data
  okx_trades_template: https://www.okx.com/cdn/okex/traderecords/trades/monthly/YYYYMM/allfuture-trades-YYYY-MM-DD.zip
  okx_funding_template: https://www.okx.com/cdn/okex/traderecords/swaprate/monthly/YYYYMM/allswaprate-swaprate-YYYY-MM-DD.zip
premium:
  target_usdc_symbol: BTCUSDC-PERP
  target_usdt_symbol: BTCUSDT-PERP
  auto_resolve_target_pair: true
  allow_synthetic_usdc_from_usdt: true
  allow_target_pair_as_proxy: false
  fail_on_missing_proxy: true
  proxy_method: median
  pw_window: 12h
  pw_min_period_fraction: 0.5
  pw_rho_clip: 0.98
  pw_fallback_to_median: true
  depeg_delta_log: 0.002
  depeg_min_consecutive: 5
  proxy_pairs:
  - - ETHUSDC-PERP
    - ETHUSDT-PERP
  - - SOLUSDC-PERP
    - SOLUSDT-PERP
  - - BNBUSDC-PERP
    - BNBUSDT-PERP
onchain:
  enabled: true
  fail_closed_on_error: true
  provider: defillama
  stablecoin_prices_url: https://stablecoins.llama.fi/stablecoinprices
  usdc_key: usd-coin
  usdt_key: tether
  cache_path: data/processed/onchain/defillama_stablecoinprices.csv
  cache_max_age_hours: 24
  request_timeout_sec: 40
  intraday_lag_days: 1
  max_source_age_hours: 48
  depeg_delta_log: 0.005
  depeg_min_consecutive: 1
  divergence_alert_log: 0.001
robust_filter:
  window: 1h
  z_threshold: 3.0
  sigma_floor: 1.0e-06
  min_period_fraction: 0.25
statmech:
  window: 1h
  entropy_bins: 17
  entropy_clip: 6.0
  min_period_fraction: 0.25
regimes:
  weight_temperature: 0.45
  weight_susceptibility: 0.45
  weight_entropy: 0.1
  smooth_span: 60
  cp_window: 30
  stress_quantile: 0.95
  recovery_quantile: 0.6
  cp_quantile: 0.9
  threshold_mode: expanding
  threshold_min_periods: 120
  zscore_mode: expanding
  zscore_min_periods: 120
  zscore_window:
  zscore_scale_floor: 1.0e-12
hawkes:
  enabled: false
  warmup: 48h
  rolling_window: 12h
  refit_interval: 30min
  stability_epsilon: 0.01
  min_events_for_fit: 20
  auto_warmup_fraction: 0.35
  auto_min_warmup: 4h
  auto_adjust_min_events: true
  auto_min_events_floor: 5
  quality_min_refits: 3
  quality_min_unique_n: 5
  quality_min_n_std: 0.005
  quality_min_fit_ok_ratio: 0.2
strategy:
  entry_k: 0.5
  strict_notice_gating: true
  m_t_source: p
  t_widen_quantile: 0.99
  chi_widen_quantile: 0.99
  confidence_floor: 0.1
  confidence_ceiling: 1.0
  event_confidence_penalty: 0.7
  technical_stress_penalty: 0.7
  usdt_concern_penalty: 0.5
  hawkes_widen_penalty: 0.75
  proxy_stress_threshold: 0.002
  onchain_stress_threshold: 0.003
  threshold_mode: expanding
  threshold_min_periods: 120
  hawkes_threshold_mode: expanding
  hawkes_threshold_min_periods: 120
  hawkes_widen_quantile: 0.8
  hawkes_risk_off_quantile: 0.95
  hawkes_widen_threshold: 0.7
  hawkes_risk_off_threshold: 0.85
execution_unifier:
  enabled: true
  slippage_curve_path: reports/final/execution_slippage_vs_size.csv
  min_history: 120
  min_regime_history: 60
  edge_bins: 12
  horizon_min_bars: 5
  horizon_max_bars: 60
  horizon_default_bars: 20
  horizon_estimation_min_obs: 30
  size_grid_step: 0.05
  trade_min_size: 0.2
  trade_edge_buffer_bps: 0.1
  widen_floor_size: 0.25
  spread_roundtrip_bps:
  fees_roundtrip_bps:
  fallback_linear_slippage_bps: 1.0
  transient_cost_multiplier: 1.0
  stress_cost_multiplier: 1.35
  slippage_root: BTC
  slippage_quote_preference: USDT
backtest:
  cost_bps: 0.75
  naive_threshold: 0.001
  position_mode: stateful
  exit_on_widen: false
  exit_on_mean_reversion: true
  min_holding_bars: 5
  max_holding_bars:
  widen_floor_size: 0.25
outputs:
  tables_dir: reports/tables
  figures_dir: reports/figures
plots:
  dpi: 150
